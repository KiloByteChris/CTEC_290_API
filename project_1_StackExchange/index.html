<!DOCTYPE html>
<html lang="en">

	<!--
		Chris McGuire
		Project 1 Stack Exchange
		CTEC 290 API
		Winter 2018

		-Include page headers, footers and navigation as needed
		-The page must be professional looking
		-Use HTML5 markup
		-The page HTML and CSS must validate
		-All code must be adequately commented
		-Provide a way for users to manually refresh the content sections
		-Display a list of the latest 15 questions asked on the site and include the following with each question:
			x-The questions title
			x-The name of the person who submitted the question and their reputation and their avatar. The image and name should be clickable and link to their profile on the site.
			x-If the question has been answered display a visual indicator letting users know that it has been answered
			x-Each tag should be clickable and link to a view on the Stack Exchange site which displays all items tagged with that tag.
		-The questions score
		-The number of answers for the question
		-Display a list of the latest 10 questions that have no answers for them. Include the following with each question:
			-The questions title
			-The name of the person who submitted the question and their reputation and their avatar. The image and name should be clickable and link to their profile on the site.
			-If the question has been answered display a visual indicator letting users know that it has been answered
			-Each tag should be clickable and link to a view on the Stack Exchange site which displays all items tagged with that tag.
			-The questions score
			-The number of answers for the question
		-Provide the user with an option to display the page as follows (use a dropdown menu or a series of links for this):
			-Featured questions on top followed by the latest 10 questions below
			-Latest 10 questions on top followed by list of featured questions
			-Featured questions on the left and latest questions on the right
			-Latest questions on the left and featured on the right
	-->


<head>

	<title>Project 1 Stack Exchange</title>

	<!-- CSS -->
	<link href="css/reset.css" rel="stylesheet" />
	<link href="css/main.css" rel="stylesheet" />

	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<script>

	// search() function takes the value from the select box and uses it to maek an ajax request
	function search(){
		var searchType= $('#searchTypeSelect').val();

		// API URLs
		var latestURL = 'https://api.stackexchange.com/2.2/questions?pagesize=15&order=desc&sort=activity&site=stackoverflow';
		var unansweredURL = 'https://api.stackexchange.com//2.2/questions/unanswered?pagesize=10&order=desc&sort=creation&site=stackoverflow';

		// check which search was selected. use the correct url
		if(searchType == 'latestQs'){

			// the url for the search
			var URL = latestURL;

		}else if(searchType == 'latestNoAnswer'){ 

			var URL = unansweredURL;
		
		}else if(searchType == 'featureOnTop'){ 

			var URL = 'https://api.stackexchange.com//2.2/questions/unanswered?pagesize=10&order=desc&sort=creation&site=stackoverflow';
			
		}else if(searchType == 'latestOnTop'){ 

			var latestURL = '';

		}else if(searchType == 'featuredOnLeft'){ 

			var URL = '';

		}else if(searchType == 'latestOnLeft'){ 

			var URL = '';
		}

		$.ajax({
			url: URL,
			method: 'GET',
		}).done(function(data){
			console.log(data);

			// iterate through all the JSON items 
			$.each(data.items, function(key, value){
				
				// determine if the question has been answered
				if(value.is_answered == false) {
					answerStatus = 'not answered';
				}else{
					answerStatus = 'answered';
				}

				// Create a display function for the tags
				var tags = value.tags; 
				var tagString = '';
				$.each(tags, function(index, value) {
					var tagURL = 'https://stackoverflow.com/questions/tagged/';
					tagURL += value;
					tagString += '<a href=' + tagURL + '><li>' + value + '</li></a>';
				});// end tags .each

				var defaultDisplayString = '<article>' +
					'<h2>' + value.title + '</h2>' +
					'<a href=' + value.owner.link +'><img src='+ value.owner.profile_image + '/></a>' +
					'<a href=' + value.owner.link +'><h3>' + value.owner.display_name +'</h3></a>' +
					'<p>' + value.owner.reputation + '</p>' +
					'<p>' + answerStatus + '</p>' +
					'<ul>' + tagString + '</ul>' +
					'</article>';

				$('#resultSection').append(defaultDisplayString); //end .append

			});  // end .each
		})  // end .done
	} // end search() function
</script>



</head>
<body>
	<div id="wrapper">

		<header>
			<h1>Stack Exchange API</h1>
			<nav>
				
			</nav>
		</header>

		<main>
			<section id="formSection">
				<h3>Select The Questions You Want To View</h3>
				<select id="searchTypeSelect">
					<option value="latestQs">Latest 15 Questions</option>
					<option value="latestNoAnswer">Latest 10 Questions with no answer</option>
					<option value="featureOnTop">Featured Questions On top, Latest Questions Below</option>
					<option value="latestOnTop">Latest Questions On Top, Featured Questions Below</option>
					<option value="featuredOnLeft">Featured Questions On The Left, Latest Questions On The Right</option>
					<option value="latestOnLeft">Latest Questions On The Left, Featured Questions On The Right</option>

				</select>
				<button name="search" value=search onclick="search()">Search</button>
				
			</section>

			<section id="resultSection">

			</section>

			<section>
			</section>
		</main>

		<footer>
		</footer>
	</div><!-- end wrapper -->
</body>
</html>