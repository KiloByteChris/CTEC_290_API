<!DOCTYPE html>
<html lang="en">

<!--
	XProvides a field for a user to enter in the location that they would like to get a weather report for such as "Vancouver, WA" or "Portland, Oregon".
	XGive the user an option to select what type of weather report to display:
	XCurrent Weather
	X5 Day Forecast 
	Your display of the weather report must include the following:
	Temperature, low temperature, high temperature
	Humidity
	Pressure
	Wind Conditions
	A graphic image showing the conditions which the API provides
	Use your creativity to create a professional looking page
	Ask questions for this assignment in the Slack #skill_building channel
	Submit a zip file of your work in Canvas.
-->

<head>

	<title>Week 3 skill building 3b</title>
	<meta charset="utf-8" />

	<!-- CSS -->
	<link href="css/main.css" rel="stylesheet" />

	<!-- JQUERY -->
 	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

 	<!-- MUSTACHE LIBRARY -->
	<script src="js/mustache.js"></script>
	<script>

	// function that searches selects the values fromt he inputs and requists the information from the api
	function search() {

		// Define variables with api infromation
		var url = "http://api.openweathermap.org/data/2.5/";
		var apiParam = "&appid="
		var apiKey = "0d78f016d75e6ca170516578566505bd";

		// select the values form the form
		var report = $('#weatherReport').val();
		var city = $('#cityInput').val();
		
		//Build the url for the api request
		url += report;
		url += "?q=";
		url += city;
		url += apiParam;
		url += apiKey;
		console.log(url);

		var call = $.ajax({
			url: url,
			method: 'GET',
			dataType: 'JSON'
		}).done( function(data){
			console.log(data);

			// select the template
			var template = $('#weatherTemplate').html();
			//console.log(template);

			var result = Mustache.render(template, data);
			console.log(result);
			$('#container').html(result);
		});
	}// end search function
	</script>
</head>
<body>
	<header>
		<h1>Skill Building #3 - Open Weather API</h1>
	</header>
	<main>
		<h2>Welcome to the weather station</h2>
		
			<label for="cityInput">Enter A City</label>
			<input type="text" id="cityInput" name="cityInput">

			<label for="weatherReport">Select a Weather Report</label>
			<select id="weatherReport" name="weatherReport">
				<option value="weather">Current Weather</option>
				<option value="forecast">5 Day Forcast</option>
			</select>
			<button value="search" onclick="search()">Search</button>	

			<script type="text/template" id="weatherTemplate">
				{{coord.lat}}
			</script>
			<div id="container">
			</div>
	</main>
</body>


</html>
